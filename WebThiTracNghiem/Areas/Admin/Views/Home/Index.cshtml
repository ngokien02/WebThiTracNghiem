@model List<WebThiTracNghiem.Areas.Admin.Models.AdminNotification>

<partial name="_SideMenu" />

<!-- Main Content -->
<main class="main-content">
	<div class="page-header">
		<h1>Tổng quan hệ thống</h1>
		<div class="date-filter">
			<select id="timeRange">
				<option value="today">Hôm nay</option>
				<option value="week">Tuần này</option>
				<option value="month" selected>Tháng này</option>
				<option value="year">Năm nay</option>
			</select>
		</div>
	</div>

	<!-- Quick Stats -->
	<div class="stats-container">
		<div class="stat-card">
			<div class="stat-icon users">
				<i class="fas fa-users"></i>
			</div>
			<div class="stat-info">

				@{
					var userCount = ViewData["UserCount"];
					var teacherCount = ViewData["TeacherCount"];
					var studentCount = ViewData["StudentCount"];
				}

				<h3>Người dùng</h3>
				<div class="stat-numbers">
					<span class="main-number">@userCount</span>
				</div>
				<div class="stat-breakdown">
					<span>Giảng viên: @teacherCount</span>
					<span>Sinh viên: @studentCount</span>
				</div>
			</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon exams">
				<i class="fas fa-file-alt"></i>
			</div>
			<div class="stat-info">

				@{
					var examCount = ViewData["ExamCount"];
					var activeExam = ViewData["ActiveExam"];
					var upcomingExam = ViewData["UpcomingExam"];
				}

				<h3>Kỳ thi</h3>
				<div class="stat-numbers">
					<span class="main-number">@examCount</span>
				</div>
				<div class="stat-breakdown">
					<span>Đang diễn ra: @activeExam</span>
					<span>Sắp tới: @upcomingExam</span>
				</div>
			</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon courses">
				<i class="fas fa-book"></i>
			</div>
			<div class="stat-info">
				<h3>Khóa học</h3>
				<div class="stat-numbers">
					<span class="main-number">89</span>
					<span class="change neutral">0%</span>
				</div>
				<div class="stat-breakdown">
					<span>Đang hoạt động: 76</span>
					<span>Đã kết thúc: 13</span>
				</div>
			</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon system">
				<i class="fas fa-server"></i>
			</div>
			<div class="stat-info">
				<h3>Hệ thống</h3>
				<div class="stat-numbers">
					<span class="main-number">98.5%</span>
					<span class="change positive">Ổn định</span>
				</div>
				<div class="stat-breakdown">
					<span>CPU: 45%</span>
					<span>RAM: 62%</span>
				</div>
			</div>
		</div>
	</div>

	<!-- Charts Section -->
	<div class="charts-container">
		<div class="chart-card">
			<h3>Thống kê truy cập</h3>
			<canvas id="accessChart"></canvas>
		</div>
		<div class="chart-card">
			<h3>Phân bố kỳ thi</h3>
			<canvas id="examChart"></canvas>
		</div>
	</div>

	<!-- Recent Activities -->
	<div class="activities-container">
		<div class="section-header">
			<h2>Hoạt động gần đây</h2>
			<a href="logs/activities.html" class="view-all">Xem tất cả</a>
		</div>
		<div class="activity-list">
			@* <div class="activity-item">
			<div class="activity-icon"><i class="fas fa-user-plus"></i></div>
			<div class="activity-details">
			<p>Thêm mới 50 tài khoản sinh viên</p>
			<span class="activity-time">5 phút trước</span>
			</div>
			<div class="activity-status success">
			<i class="fas fa-check"></i>
			</div>
			</div> *@

			@foreach (var tb in Model)
			{
				<div class="activity-item">
					<div class="activity-icon"><i class="fas fa-file-alt"></i></div>
					<div class="activity-details">
						<p>Kỳ thi "@tb.TieuDe" đã bắt đầu</p>
						@{
							var now = DateTime.Now;
							var timeSpan = (Int32)(now - tb.GioTB).TotalMinutes;
						}
						<span class="activity-time">@timeSpan phút trước</span>
					</div>
					<div class="activity-status warning">
						<i class="fas fa-clock"></i>
					</div>
				</div>
			}
			@* <div class="activity-item">
			<div class="activity-icon"><i class="fas fa-database"></i></div>
			<div class="activity-details">
			<p>Sao lưu dữ liệu tự động</p>
			<span class="activity-time">1 giờ trước</span>
			</div>
			<div class="activity-status success">
			<i class="fas fa-check"></i>
			</div>
			</div> *@
		</div>
	</div>
</main>