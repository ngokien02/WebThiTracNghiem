@model List<DeThi>

<main class="main-content">
	<div class="page-header">
		<h1>@ViewData["Title"]</h1>
		<div class="header-actions" style="background-color: var(--primary-color);">
			<a href="/teacher/exam/index" class="side-link CreateExam">
				<i class="fas fa-plus-circle" style="color:white"></i>
				<span style="color:white">Tạo đề thi mới</span>
			</a>
		</div>
	</div>
	<div class="exams-list">
		@if (Model.Any())
		{
			foreach (var de in Model)
			{
				<div class="exam-card active">
					<div class="exam-status">
						@{
							if (de.GioBD <= DateTime.Now && de.GioKT > DateTime.Now)
							{
								<span class="status-badge in-progress">
									"Đang diễn ra"
								</span>
							}
							else
							{
								<span class="status-badge upcoming">
									"Sắp diễn ra"
								</span>
							} 
						}
					</div>
					<div class="exam-info">
						<h3 id="made">@de.TieuDe (@de.MaDe)</h3>
						<div class="exam-details">
							<p>
								<i class="fas fa-calendar"></i>
								@de.GioBD.ToString("dd/MM/yyyy HH:mm") - @de.GioKT.ToString("dd/MM/yyyy HH:mm")
							</p>
							<p><i class="fas fa-clock"></i> Thời gian: @de.ThoiGian phút</p>
							<p><i class="fas fa-list-ol"></i> Số câu hỏi: @de.SoCauHoi</p>
							<p><i class="fas fa-star"></i> Điểm tối đa: @de.DiemToiDa</p>
							<p><i class="fas fa-user-tie"></i> Giảng viên: @de.GiangVien.HoTen</p>
						</div>
					</div>
					<div class="exam-actions">
						<a href="javascript:;" class="btn secondary btn-editExam" data-id="@de.Id">Chỉnh sửa</a>
						<a href="javascript:;" class="btn danger btn-deleteExam" data-id="@de.Id">Kết thúc</a>
					</div>
				</div>
			}
		}
		else
		{
			<p class="text-muted">Hiện không có đề thi nào đang diễn ra.</p>
		}
	</div>
		<div class="pagination">
			<button class="btn-page page-ActiveExam" data-page="@(ViewBag.CurrentPage - 1)" @(ViewBag.CurrentPage == 1 ? "disabled" : "")>
				<i class="fas fa-chevron-left"></i>
			</button>

			@for (int i = 1; i <= ViewBag.TotalPages; i++)
			{
				<button class="btn-page page-ActiveExam @(ViewBag.CurrentPage == i ? "active" : "")" data-page="@i">@i</button>
			}

			<button class="btn-page page-ActiveExam" data-page="@(ViewBag.CurrentPage + 1)" @(ViewBag.CurrentPage == ViewBag.TotalPages ? "disabled" : "")>
				<i class="fas fa-chevron-right"></i>
			</button>
		</div>
</main>
<!-- Modal Đề Thi -->
<div class="modalUser" id="examModal" style="display:none;">
	<div class="modal-user-content">
		<div class="modal-user-header">
			<h2>Chỉnh Sửa Đề Thi</h2>
			<button type="button" class="close-btn" onclick="closeModal('examModal')">&times;</button>
		</div>
		<div class="modal-user-body">
			<form id="examForm">
				<div class="form-group_User">
					<input type="hidden" id="examId" name="Id" />
					<label for="examMaDe">Mã Đề</label>
					<input type="text" id="examMaDe" name="MaDe" required />
				</div>

				<div class="form-group_User">
					<label for="examTieuDe">Tiêu Đề</label>
					<input type="text" id="examTieuDe" name="TieuDe" required />
				</div>

				<div class="form-group_User">
					<label for="examGioBD">Giờ bắt đầu</label>
					<input type="datetime-local" id="examGioBD" name="GioBD" required />
				</div>

				<div class="form-group_User">
					<label for="examGioKT">Giờ kết thúc</label>
					<input type="datetime-local" id="examGioKT" name="GioKT" required />
				</div>

				<div class="form-group_User">
					<label for="examThoiGian">Thời Gian (phút)</label>
					<input type="number" id="examThoiGian" name="ThoiGian" required />
				</div>

				<div class="form-group_User">
					<input type="checkbox" id="examRandomCauHoi" name="RandomCauHoi" />
					<label for="examRandomCauHoi">Random Câu hỏi</label>
				</div>

				<div class="form-group_User">
					<input type="checkbox" id="examRandomDapAn" name="RandomDapAn" />
					<label for="examRandomDapAn">Random Đáp án</label>
				</div>

				<div class="form-group_User">
					<input type="checkbox" id="examShowKQ" name="ShowKQ" />
					<label for="examShowKQ">Hiển thị kết quả</label>
				</div>

				<div class="form-user-actions">
					<button type="button" class="btn btn-secondary" onclick="closeModal('examModal')">Hủy</button>
					<button type="submit" class="btn btn-primary">Lưu đề thi</button>
				</div>
			</form>
		</div>
	</div>
</div>

