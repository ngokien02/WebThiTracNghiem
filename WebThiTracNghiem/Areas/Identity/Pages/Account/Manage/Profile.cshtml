@page
@section ProfileStyle {
    <link rel="stylesheet" href="~/css/profile.css" asp-append-version="true" />
}
@model WebThiTracNghiem.Areas.Identity.Pages.Account.Manage.ProfileModel
@{
    ViewData["Title"] = "Thông tin cá nhân";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="main-container">
    <div class="main-content">
        <h1>Thông tin cá nhân</h1>

        <div class="profile-container">
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="/images/@Model.UserInfo.AvatarUrl" alt="Avatar" id="avatarPreview" />
                    <label for="avatarInput" class="change-avatar-btn">
                        <i class="fas fa-camera"></i> Thay đổi ảnh
                    </label>
                    <input type="file" id="avatarInput" accept=".jpg,.jpeg,.png,.gif,.webp" style="display: none;" />
                </div>
                <div class="profile-summary">
                    <h2>@(Model.UserInfo.HoTen ?? "Chưa cập nhật")</h2>
                    <p class="student-id">MSSV: @Model.UserInfo.UserName</p>
                </div>
            </div>

            <form id="profile-form">
                <!-- Thông tin cơ bản -->
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> Thông tin cơ bản</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Họ và tên</label>
                            <input name="HoTen" value="@Model.UserInfo.HoTen" />
                        </div>
                        <div class="form-group">
                            <label>Ngày sinh</label>
                            <input name="NgaySinh" type="date" value="@Model.UserInfo.NgaySinh?.ToString("yyyy-MM-dd")" />
                        </div>
                        <div class="form-group">
                            <label>Giới tính</label>
                            <select name="GioiTinh">
                                <option value="Nam" selected="@(Model.UserInfo.GioiTinh == "Nam" ? "selected" : null)">Nam</option>
                                <option value="Nữ" selected="@(Model.UserInfo.GioiTinh == "Nữ" ? "selected" : null)">Nữ</option>
                                <option value="Khác" selected="@(Model.UserInfo.GioiTinh == "Khác" ? "selected" : null)">Khác</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Số CMND/CCCD</label>
                            <input name="CMND" value="@Model.UserInfo.CCCD" />
                        </div>
                    </div>
                </div>

                <!-- Thông tin liên hệ -->
                <div class="form-section">
                    <h3><i class="fas fa-address-book"></i> Thông tin liên hệ</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Email</label>
                            <input name="Email" value="@Model.UserInfo.Email" />
                        </div>
                        <div class="form-group">
                            <label>Số điện thoại</label>
                            <input name="PhoneNumber" inputmode="numeric" value="@Model.UserInfo.PhoneNumber" />
                        </div>
                        <div class="form-group full-width">
                            <label>Địa chỉ thường trú</label>
                            <input name="DiaChi" value="@Model.UserInfo.DiaChi" />
                        </div>
                    </div>
                </div>

                <!-- Thông tin học tập -->
                <div class="form-section">
                    <h3><i class="fas fa-graduation-cap"></i> Thông tin học tập</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Khoa</label>
                            <input name="Khoa" value="@Model.UserInfo.Khoa" readonly />
                        </div>
                        <div class="form-group">
                            <label>Lớp</label>
                            <input name="LopHoc" value="@Model.UserInfo.LopHoc" readonly />
                        </div>
                        <div class="form-group">
                            <label>Khóa học</label>
                            <input name="KhoaHoc" value="@Model.UserInfo.KhoaHoc" readonly />
                        </div>
                    </div>
                </div>

                <!-- Bảo mật -->
                <div class="form-section">
                    <h3><i class="fas fa-lock"></i> Bảo mật tài khoản</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Mật khẩu hiện tại</label>
                            <input name="CurrentPassword" type="password" placeholder="Nhập mật khẩu hiện tại" />
                        </div>
                        <div class="form-group">
                            <label>Mật khẩu mới</label>
                            <input name="NewPassword" type="password" placeholder="Nhập mật khẩu mới" />
                        </div>
                        <div class="form-group">
                            <label>Xác nhận mật khẩu mới</label>
                            <input name="ConfirmPassword" type="password" placeholder="Xác nhận mật khẩu mới" />
                        </div>
                    </div>
                </div>
                <button type="button" id="btnChangePass" class="btn-save">
                    <i class="fas fa-key"></i> Đổi mật khẩu
                </button>

                <div class="form-actions">
                    <button type="submit" class="btn-save"><i class="fas fa-save"></i> Lưu thay đổi</button>
                    <button type="reset" class="btn-cancel"><i class="fas fa-undo"></i> Hủy thay đổi</button>
                </div>
            </form>
        </div>
    </div>
</div>

